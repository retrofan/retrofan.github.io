@using Microsoft.AspNet.Identity
@model CapstoneWIE.DataLayer.Models.BlogPost

@{
    ViewBag.Title = "EditBlog";
}

<div ng-controller="blogController">
    <div class="container" ng-init="setBlog('@Model.Id')">
        <form ng-submit="submitDraft()" method="post">
            <div class="row">
                <div class="col-sm-1"></div>
                <div class="col-sm-10">
                    <div class="form-inline" style="padding-bottom: 20px">
                        <label style="padding-top: 50px">Title:</label>
                        <input type="text" name="Title" class="form-control" ng-model="newBlog.Title" />
                        <div style="padding-left: 35px">
                            <div class="alert-danger" style="width: 17%;" ng-show="alert.title.status" ng-bind="alert.title.message"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-1"></div>
                <div class="col-sm-10" style="width: 80%; margin-left:3%">
                    <textarea ui-tinymce="tinymceOptions" ng-model="newBlog.Content" ngMinlength="1"></textarea>
                    <div ng-show="alert.content.status" ng-bind="alert.content.message" class="alert-danger"></div>
                    <br />
                </div>
            </div>
            <div class="row">
                <div class="col-sm-8"></div>
                <div style="padding-left: 40px" class="col-sm-3">
                    <button type="submit" ng-click="setDraft()" class="btn btn-sm btn-primary">Save to Draft</button>
                    <button type="submit" ng-click="submit()" class="btn btn-sm btn-primary" id="btnBlogSubmit">Submit for Review</button>
                </div>
            </div>
        </form>

        <div class="row">
            <div class="col-sm-1"></div>
            <div class="col-sm-10">
                <div class="form-inline">
                    <label>Add Tags: </label>
                    <input type="text" name="tag" class="form-control" ng-model="newTag.Name"/>
                    <button ng-click="addTag()" class="btn btn-sm btn-primary">Add Tag</button>

                </div>
            </div>
        </div>


        <div style="padding-top: 20px" class="row">
            <div class="col-sm-1"></div>
            <div class="col-sm-10">
                <span style="padding-top: 20px" ng-repeat="t in newBlog.Tags">
                    <button class="btn btn-sm btn-default" ng-bind="t.Name"></button>
                </span>
            </div>
        </div>
    </div>
</div>
